!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(r.Points={})}(this,function(r){"use strict";var t=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},e=function(){function r(r,t){var e=[],n=!0,u=!1,c=void 0;try{for(var o,a=r[Symbol.iterator]();!(n=(o=a.next()).done)&&(e.push(o.value),!t||e.length!==t);n=!0);}catch(r){u=!0,c=r}finally{try{!n&&a.return&&a.return()}finally{if(u)throw c}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)},u=2*Math.PI,c=function(r,t,e,n,u,c,o){var a=r.x,i=r.y;return{x:n*(a*=t)-u*(i*=e)+c,y:u*a+n*i+o}},o=function(r,t){var e=4/3*Math.tan(t/4),n=Math.cos(r),u=Math.sin(r),c=Math.cos(r+t),o=Math.sin(r+t);return[{x:n-u*e,y:u+n*e},{x:c+o*e,y:o-c*e},{x:c,y:o}]},a=function(r,t,e,n){var u=r*n-t*e<0?-1:1,c=(r*e+t*n)/(Math.sqrt(r*r+t*t)*Math.sqrt(r*r+t*t));return c>1&&(c=1),c<-1&&(c=-1),u*Math.acos(c)},i=function(r,t,e,n,c,o,i,y,v,x,f,p){var s=Math.pow(c,2),h=Math.pow(o,2),l=Math.pow(f,2),g=Math.pow(p,2),d=s*h-s*g-h*l;d<0&&(d=0),d/=s*g+h*l;var m=(d=Math.sqrt(d)*(i===y?-1:1))*c/o*p,M=d*-o/c*f,b=x*m-v*M+(r+e)/2,w=v*m+x*M+(t+n)/2,A=(f-m)/c,I=(p-M)/o,q=(-f-m)/c,T=(-p-M)/o,L=a(1,0,A,I),P=a(A,I,q,T);return 0===y&&P>0&&(P-=u),1===y&&P<0&&(P+=u),[b,w,L,P]},y=function(r){var t=r.px,n=r.py,a=r.cx,y=r.cy,v=r.rx,x=r.ry,f=r.xAxisRotation,p=void 0===f?0:f,s=r.largeArcFlag,h=void 0===s?0:s,l=r.sweepFlag,g=void 0===l?0:l,d=[];if(0===v||0===x)return[];var m=Math.sin(p*u/360),M=Math.cos(p*u/360),b=M*(t-a)/2+m*(n-y)/2,w=-m*(t-a)/2+M*(n-y)/2;if(0===b&&0===w)return[];v=Math.abs(v),x=Math.abs(x);var A=Math.pow(b,2)/Math.pow(v,2)+Math.pow(w,2)/Math.pow(x,2);A>1&&(v*=Math.sqrt(A),x*=Math.sqrt(A));var I=i(t,n,a,y,v,x,h,g,m,M,b,w),q=e(I,4),T=q[0],L=q[1],P=q[2],F=q[3],O=Math.max(Math.ceil(Math.abs(F)/(u/4)),1);F/=O;for(var j=0;j<O;j++)d.push(o(P,F)),P+=F;return d.map(function(r){var t=c(r[0],v,x,M,m,T,L),e=t.x,n=t.y,u=c(r[1],v,x,M,m,T,L),o=u.x,a=u.y,i=c(r[2],v,x,M,m,T,L);return{x1:e,y1:n,x2:o,y2:a,x:i.x,y:i.y}})},v=function(r,t,e){return Math.acos((Math.pow(r,2)+Math.pow(t,2)-Math.pow(e,2))/(2*r*t))*(180/Math.PI)},x=function(r,t){for(var e=arguments.length,n=Array(e>2?e-2:0),u=2;u<e;u++)n[u-2]=arguments[u];return p(t)?t.map(function(t){return r.apply(void 0,[t].concat(n))}):r.apply(void 0,[t].concat(n))},f=function(r){return p(r)?r:[r]},p=function(r){return Array.isArray(r[0])},s=function(r,t,e){var n=r===t?0:Math.abs(t-r);return 0===n?r:r<t?r+n*e:r-n*e},h=function(r){for(var t=[],e=0,n=r.length;e<n;e++){var u=r[e];if(u.curve&&"cubic"!==u.curve.type){var c=r[e-1],o=c.x,a=c.y,i=u.x,v=u.y;if("arc"===u.curve.type)y({px:o,py:a,cx:i,cy:v,rx:u.curve.rx,ry:u.curve.ry,xAxisRotation:u.curve.xAxisRotation,largeArcFlag:u.curve.largeArcFlag,sweepFlag:u.curve.sweepFlag}).forEach(function(r){var e=r.x1,n=r.y1,u=r.x2,c=r.y2,o=r.x,a=r.y;t.push({x:o,y:a,curve:{type:"cubic",x1:e,y1:n,x2:u,y2:c}})});else if("quadratic"===u.curve.type){var x=o+2/3*(u.curve.x1-o),f=a+2/3*(u.curve.y1-a),p=i+2/3*(u.curve.x1-i),s=v+2/3*(u.curve.y1-v);t.push({x:i,y:v,curve:{type:"cubic",x1:x,y1:f,x2:p,y2:s}})}}else t.push(u)}return t},l=function(r){return x(h,r)},g=function(r,t){return[{x:s(r.x,t.x,.5),y:s(r.y,t.y,.5)},t]},d=function(r,t){var e=t.curve,n=e.x1,u=e.y1,c=e.x2,o=e.y2,a={x:r.x,y:r.y},i={x:n,y:u},y={x:c,y:o},v={x:t.x,y:t.y},x={x:s(a.x,i.x,.5),y:s(a.y,i.y,.5)},f={x:s(i.x,y.x,.5),y:s(i.y,y.y,.5)},p={x:s(y.x,v.x,.5),y:s(y.y,v.y,.5)},h={x:s(x.x,f.x,.5),y:s(x.y,f.y,.5)},l={x:s(f.x,p.x,.5),y:s(f.y,p.y,.5)},g={x:s(h.x,l.x,.5),y:s(h.y,l.y,.5)};return[{x:g.x,y:g.y,curve:{type:"cubic",x1:x.x,y1:x.y,x2:h.x,y2:h.y}},{x:v.x,y:v.y,curve:{type:"cubic",x1:l.x,y1:l.y,x2:p.x,y2:p.y}}]},m=function(r,t){return t.curve?d(r,t):g(r,t)},M=function r(t,u){if(isNaN(u))throw Error("`add` function must be passed a number as the second argument");for(var c=[].concat(n(t)),o=1;o<c.length;){if(c.length>=u)return c;var a=c[o];if(a.moveTo)o++;else{var i=c[o-1],y=m(i,a),v=e(y,2),x=v[0],f=v[1];c.splice(o,1,x,f),o+=2}}return r(c,u)},b=function(r,t){var e=q(r,t);return e.reduce(function(r,t,n){var u=t.x,c=t.y;if(!t.moveTo){var o=e[n-1],a=o.x,i=o.y;r+=w(a,i,u,c)}return r},0)},w=function(r,t,e,n){return Math.sqrt(Math.pow(r-e,2)+Math.pow(t-n,2))},A=function(r){var t=e(r[0],2),n=t[0],u=t[1],c=e(r[1],2),o=c[0],a=c[1],i=e(r[2],2),y=i[0],x=i[1],f=w(n,u,o,a),p=w(o,a,y,x),s=w(y,x,n,u);return v(f,p,s)},I=function(r){return r.reduce(function(r,t){return!!t.curve||r},!1)},q=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!I(r))return r;var e=l(r),n=[];return e.map(function(r,u){if(r.curve){var c=e[u-1];L(c,r,t).map(function(r){return n.push(r)})}else n.push(r)}),n},T=function(r,t,e,n,u,c,o,a,i){var y=[[o,a],[r,t],[u,c]];return A([[e,n],[u,c],[r,t]])<i&&A(y)<i},L=function r(t,u,c){var o=t.x,a=t.y,i=u.x,y=u.y,v=u.curve,x=v.x1,f=v.y1,p=v.x2,s=v.y2;if(T(o,a,x,f,i,y,p,s,c))return[u];var h=d(t,u),l=e(h,2),g=l[0],m=l[1];return[].concat(n(r(t,g,c)),n(r(g,m,c)))},P=function(r){var t=void 0,e=void 0,n=void 0,u=void 0;return f(r).map(function(r){return q(r).map(function(r){var c=r.x,o=r.y;("number"!=typeof t||o>t)&&(t=o),("number"!=typeof e||c<e)&&(e=c),("number"!=typeof n||c>n)&&(n=c),("number"!=typeof u||o<u)&&(u=o)})}),{bottom:t,center:{x:e+(n-e)/2,y:u+(t-u)/2},left:e,right:n,top:u}},F=function(r){return r.reduce(function(r,t){return r+O(t)},0)},O=function(r){return r.length-(j(r)?1:0)},j=function(r){var t=r[0],e=r[r.length-1];return t.x===e.x&&t.y===e.y},R=function(r){return r.reduce(function(r,t){return[].concat(n(r),n(t))},[])},E=function(r,t){for(var e=0,n=r.length;e<n;e++){var u=O(r[e]);if(t<=u-1)return{lineIndex:e,pointIndex:t};t-=u}},N=function(r,t){return[].concat(n(r)).splice(t).concat([].concat(n(r)).splice(0,t))},k=function(r,t){if(!t)return r;var e=[{x:r[t].x,y:r[t].y,moveTo:!0}].concat(n([].concat(n(r)).splice(t+1)));return j(r)?[].concat(n(e),n([].concat(n(r)).splice(1,t))):[].concat(n(e),n([].concat(n(r)).splice(0,t+1)))},S=function(r){return r.reduce(function(r,t){return t.moveTo&&r.push([]),r[r.length-1].push(t),r},[])},_=function(r,e,n){return r.map(function(r){var u=t({},r);return u.x+=e,u.y+=n,u.curve&&(u.curve=t({},u.curve),"quadratic"!==u.curve.type&&"cubic"!==u.curve.type||(u.curve.x1+=e,u.curve.y1+=n),"cubic"===u.curve.type&&(u.curve.x2+=e,u.curve.y2+=n)),u})},B=function(r,t,e,n,u){if(r===e)return t>=n?0:180;var c=w(e,n,r,t-100),o=v(u,100,c);return r<e?o:360-o},z=function(r,t,e,n){var u=r[t-2],c=u.x,o=u.y,a=r[t-1],i=a.x,y=a.y,v=w(c,o,i,y);return{x1:c,y1:o,x2:i,y2:y,segmentInterval:(n-e)/v+1,segmentLength:v}},C=function(r,t){var e=r[0],n=e.x,u=e.y,c=r[1],o=c.x,a=c.y,i=w(n,u,o,a);return{x1:n,y1:u,x2:o,y2:a,segmentInterval:t/i,segmentLength:i}},D=function(r,t,e){for(var n=0,u=0;u<t;u++)if(!r[u].moveTo){var c=r[u-1],o=c.x,a=c.y,i=r[u],y=i.x,v=i.y,x=w(o,a,y,v);if(n+x>=e)return{x1:o,y1:a,x2:y,y2:v,segmentInterval:(e-n)/x,segmentLength:x};n+=x}},G=function(r,t,e){if(t.curve||e.curve)return!1;var n=(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y);if(Math.abs(n)>Number.EPSILON)return!1;var u=(e.x-r.x)*(t.x-r.x)+(e.y-r.y)*(t.y-r.y);return!(u<0)&&!(u>(t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))},H=function(r){for(var t=[],e=0,n=r.length;e<n;e++){var u=t[t.length-1],c=r[e+1],o=r[e];u&&c&&o&&G(u,c,o)||t.push(o)}return t},J=function(r){var t=void 0,e=void 0;return r.reverse().map(function(r,n){var u=r.x,c=r.y,o=r.moveTo,a=r.curve,i={x:u,y:c};if(e){var y=e,v=y.x1,x=y.y1,f=y.x2,p=y.y2;i.curve={type:"cubic",x1:f,y1:p,x2:v,y2:x}}return(0===n||t)&&(i.moveTo=!0),t=o,e=a||null,i})},K=function(r,t,e,n,u){var c=u.x,o=u.y,a=r-c,i=t-o;return[a*e-i*n+c,a*n+i*e+o]},Q=function(r,n,u){return r.map(function(r){var c=n*Math.PI/180,o=Math.cos(c),a=Math.sin(c),i=K(r.x,r.y,o,a,u),y=e(i,2),v=y[0],x=y[1],f=t({},r,{x:v,y:x});if(f.curve){if("quadratic"===f.curve.type||"cubic"===f.curve.type){var p=K(f.curve.x1,f.curve.y1,o,a,u),s=e(p,2),h=s[0],l=s[1];f.curve=t({},f.curve,{x1:h,y1:l})}if("cubic"===f.curve.type){var g=K(f.curve.x2,f.curve.y2,o,a,u),d=e(g,2),m=d[0],M=d[1];f.curve=t({},f.curve,{x2:m,y2:M})}}return f})},U=function(r,e,n,u){var c=t({},r);return c.x=n-(n-c.x)*e,c.y=u-(u-c.y)*e,r.curve&&(c.curve=t({},c.curve),"arc"===c.curve.type?(c.curve.rx&&(c.curve.rx=c.curve.rx*e),c.curve.ry&&(c.curve.ry=c.curve.ry*e)):(c.curve.x1=n-(n-c.curve.x1)*e,c.curve.y1=u-(u-c.curve.y1)*e,"cubic"===c.curve.type&&(c.curve.x2=n-(n-c.curve.x2)*e,c.curve.y2=u-(u-c.curve.y2)*e))),c};r.add=function(r,t){return M(l(r),t)},r.boundingBox=P,r.cubify=l,r.length=b,r.moveIndex=function(r,t){var e=S(r),u=F(e),c=(t%u+u)%u;if(!c)return r;var o=E(e,c),a=o.lineIndex,i=o.pointIndex,y=N(e,a),v=k(y[0],i),x=[].concat(n(y)).splice(1);return R([v].concat(n(x)))},r.offset=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return x(_,r,t,e)},r.position=function(r,t,e){var n=q(r,e),u=n.length,c=b(n),o=c*t,a=t>1?z(n,u,c,o):t<0?C(n,o):D(n,u,o),i=a.x1,y=a.y1,v=a.x2,x=a.y2,f=a.segmentInterval,p=a.segmentLength;return{angle:B(i,y,v,x,p),x:s(i,v,f),y:s(y,x,f)}},r.remove=function(r){return x(H,r)},r.reverse=function(r){return x(J,l(r))},r.rotate=function(r,t){var e=P(r).center;return x(Q,r,t,e)},r.scale=function(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",n=P(r),u=n.bottom,c=n.center,o=n.left,a=n.right,i=n.top,y=c.x,v=c.y;switch(e){case"topLeft":y=o,v=i;break;case"topRight":y=a,v=i;break;case"bottomRight":y=a,v=u;break;case"bottomLeft":y=o,v=u}return x(function(r){return r.map(function(r){return U(r,t,y,v)})},r)},Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=points.min.js.map
